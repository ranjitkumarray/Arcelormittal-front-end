<ng-container *ngIf="loadingRouteConfig">
    <div class="loading-overlay is-active">
        <span class="signal"></span>
    </div>
</ng-container>

<div *ngIf="breadCrumblocationsList" class="breadcrumb">
    <div class="row pd-10 bg-w">
        <div class="col-sm-12 col-lg-12 col-md-12 col-xl-12">

            <font *ngFor="let data of breadCrumblocationsList" class="addArrow">

                <a role="button"
                    [ngClass]="{'breadCrumbBlue addArroww': data?.currentPage === true, 'breadCrumb addArroww':data?.currentPage === false }"
                    (click)="redirect(data.link)">
                    {{data.locationName}}
                </a>
            </font>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-6">
        <mat-vertical-stepper fxLayout="column" [linear]="true" #stepper>
            <mat-step [stepControl]="firstFormGroup">
                <form [formGroup]="firstFormGroup">
                    <ng-template matStepLabel>Demographic Details</ng-template>
                    <div class="row pd-t-b">
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>First Name</mat-label>
                                <input matInput placeholder="First name" formControlName="first_name" required>
                            </mat-form-field>
                        </div>
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Middle Name</mat-label>
                                <input matInput placeholder="Middle Name" formControlName="middle_name">
                            </mat-form-field>
                        </div>
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Last name</mat-label>
                                <input matInput placeholder="Last name" formControlName="last_name" required>
                            </mat-form-field>
                        </div>
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Username</mat-label>
                                <input matInput placeholder="Username" formControlName="username" required
                                    (focusout)="validationCheck('username')">
                                <mat-icon matSuffix *ngIf="firstFormGroup?.controls['username']?.errors?.incorrect"
                                    style="color:red">
                                    circle_o</mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Email</mat-label>
                                <input matInput placeholder="Email" formControlName="email" required
                                    (focusout)="validationCheck('email')">
                                <mat-icon matSuffix *ngIf="firstFormGroup?.controls['email']?.errors?.incorrect"
                                    style="color:red">
                                    circle_o</mat-icon>
                            </mat-form-field>
                        </div>
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Phone Number</mat-label>
                                <input matInput placeholder="Phone Number" type="text" formControlName="phone_no"
                                    [minLength]="5" [maxLength]="10"
                                    onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                                    oninput="javascript: if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);"
                                    autocomplete="off" required>
                            </mat-form-field>
                        </div>
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Address</mat-label>
                                <input matInput placeholder="Address" formControlName="address" required>
                            </mat-form-field>
                        </div>

                        <!-- <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>Pin</mat-label>
                                <input matInput placeholder="Pin" formControlName="pin" required>
                            </mat-form-field>
                        </div> -->

                        <div class="col-12">
                            <div class="text-right">
                                <button type="button" color="primary" [disabled]="firstFormGroup.invalid" mat-raised-button matStepperNext>
                                    Next
                                </button>
                            </div>
                        </div>
                    </div>


                </form>
            </mat-step>
            <mat-step [stepControl]="secondFormGroup">
                <form [formGroup]="secondFormGroup">
                    <ng-template matStepLabel>Access Details</ng-template>
                    <div class="row pd-t-b">
                        <div class="col-12">
                            <mat-form-field appearance="outline" class="w-100">
                                <mat-label>User Group</mat-label>
                                <mat-select formControlName="user_group" required>
                                    <mat-option *ngFor="let accessUser of accessList" [value]="accessUser.groupid">
                                        {{accessUser.group_description}}</mat-option>
                                </mat-select>
                            </mat-form-field>

                        </div>
                        <div class="col-12">
                            <div class="text-right">
                                <button type="button" color="primary" class="mr-10" mat-stroked-button
                                    matStepperPrevious>Back</button>
                                <button type="button" [disabled]="secondFormGroup.invalid" color="primary" mat-raised-button matStepperNext>Next</button>
                            </div>
                        </div>
                    </div>
                </form>
            </mat-step>
            <mat-step>
                <ng-template matStepLabel>Preview</ng-template>
                <div class="row pd-t-b">
                    <div class="col-6 pd-5">
                        <span class="s-bold">First Name :&nbsp;</span>
                        <span class="regular">{{firstFormGroup?.value?.first_name}}</span>
                    </div>
                    <div class="col-6 pd-5">
                        <span class="s-bold"> Middle Name :&nbsp;</span>
                        <span class="regular">{{firstFormGroup?.value?.middle_name}}</span>
                    </div>
                    <div class="col-6 pd-5">
                        <span class="s-bold">Last Name : &nbsp;</span>
                        <span class="regular">{{firstFormGroup?.value?.last_name}}</span>
                    </div>
                    <div class="col-6 pd-5">
                        <span class="s-bold">Username :&nbsp; </span>
                        <span class="regular">{{firstFormGroup?.value?.username}}</span>
                    </div>
                    <div class="col-12 pd-5">
                        <span class="s-bold">Email : &nbsp;</span>
                        <span class="regular">{{firstFormGroup?.value?.email}}</span>
                    </div>
                    <div class="col-6 pd-5">
                        <span class="s-bold">Phone Number :&nbsp; </span>
                        <span class="regular">{{firstFormGroup?.value?.phone_no}}</span>
                    </div>
                    <div class="col-6 pd-5">
                        <span class="s-bold">User Group :&nbsp; </span>
                        <span class="regular">{{secondFormGroup?.value?.user_group}}</span>
                    </div>
                    <div class="col-12 pd-5">
                        <span class="s-bold">Address : </span>
                        <span class="regular">{{firstFormGroup?.value?.address}}</span>
                    </div>

                    <div class="col-12">
                        <div class="text-right">
                            <button type="button" color="primary" class="mr-10" mat-stroked-button
                                matStepperPrevious>Back</button>
                            <button type="button" color="primary" class="mr-10" id="reset" mat-stroked-button
                                (click)="stepper.reset()">Reset</button>
                            <button type="button" [disabled]="secondFormGroup.invalid" color="primary" mat-raised-button (click)="submit()">Submit</button>
                        </div>
                    </div>
                </div>
            </mat-step>
        </mat-vertical-stepper>

    </div>
</div>